<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Communication Bridge AI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>Communication Bridge AI - Dashboard</h1>
            <div class="status">
                <span id="status-indicator" class="status-dot"></span>
                <span id="status-text">Connecting...</span>
            </div>
        </header>
        
        <!-- Communication Mode Selector -->
        <div class="mode-selector">
            <button type="button" class="mode-btn active" id="mode-nonverbal-to-verbal">
                ğŸ‘¤ â†’ ğŸ—£ï¸ Non-Verbal to Verbal
            </button>
            <button type="button" class="mode-btn" id="mode-verbal-to-nonverbal">
                ğŸ—£ï¸ â†’ ğŸ‘¤ Verbal to Non-Verbal
            </button>
        </div>
        
        <!-- Main Layout: Left Content + Right Conversation History -->
        <div class="main-layout">
            <!-- Left Column: Main Content -->
            <div class="left-content">
                <!-- User Account Section -->
                <div class="user-account-section">
                    <div class="user-avatar">
                        <span class="avatar-icon">ğŸ‘¤</span>
                    </div>
                    <div class="user-info">
                        <h3 class="user-name">Student User</h3>
                        <p class="user-role">Non-Verbal Communicator</p>
                        <p class="user-credits" id="credits-display" style="font-size: 0.85rem; color: #667eea; margin-top: 4px;"></p>
                    </div>
                    <div class="user-actions">
                        <button type="button" class="btn-icon" title="Settings">âš™ï¸</button>
                        <button type="button" class="btn-icon" title="Logout" onclick="logout()">ğŸšª</button>
                    </div>
                </div>
                
                <!-- Original Single Direction View -->
                <div id="single-direction-view">
                    <section class="panel simulation-panel">
                        <h2 id="simulation-title">Non-Verbal to Verbal Communication</h2>
                        <div class="simulation-controls">
                            <button type="button" id="start-sim" class="btn-primary">Start Simulation</button>
                            <button type="button" id="stop-sim" class="btn-danger" style="display: none;">Stop Simulation</button>
                            <span id="session-id" class="session-info"></span>
                        </div>
                        
                        <div class="communication-area">
                            <div class="input-section">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h3 id="input-title">Non-Verbal Student Input</h3>
                                    <div class="input-mode-toggle">
                                        <button type="button" id="text-mode-btn" class="mode-btn active">
                                            ğŸ“ Text
                                        </button>
                                        <button type="button" id="speech-mode-btn" class="mode-btn">
                                            ğŸ¤ Speech
                                        </button>
                                        <button type="button" id="webcam-mode-btn" class="mode-btn">
                                            ğŸ“¹ Webcam
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Common Phrases for Verbal to Non-Verbal Mode -->
                                <div id="common-phrases-section" style="display: none;">
                                    <h4 style="margin-bottom: 10px; color: #4a5568;">Common Phrases:</h4>
                                    <div id="common-phrases-buttons" class="phrase-buttons-grid"></div>
                                    <textarea id="verbal-teacher-input" placeholder="Type your message or select a phrase above..." style="margin-top: 15px;"></textarea>
                                </div>
                                
                                <div id="text-input-mode">
                                    <div class="token-buttons">
                                        <!-- Greetings & Basic -->
                                        <button type="button" class="token-btn" data-token="ğŸ‘‹">ğŸ‘‹ Hello/Hi</button>
                                        <button type="button" class="token-btn" data-token="â˜€ï¸ğŸ‘‹">â˜€ï¸ğŸ‘‹ Good Morning</button>
                                        <button type="button" class="token-btn" data-token="ğŸŒ¤ï¸ğŸ‘‹">ğŸŒ¤ï¸ğŸ‘‹ Good Afternoon</button>
                                        <button type="button" class="token-btn" data-token="ğŸŒ™ğŸ‘‹">ğŸŒ™ğŸ‘‹ Good Night</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘‹âœŒï¸">ğŸ‘‹âœŒï¸ Goodbye</button>
                                        
                                        <!-- Polite Expressions -->
                                        <button type="button" class="token-btn" data-token="ğŸ™">ğŸ™ Please</button>
                                        <button type="button" class="token-btn" data-token="ğŸ™â¤ï¸">ğŸ™â¤ï¸ Thank You</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘">ğŸ‘ Yes/Good</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘">ğŸ‘ No</button>
                                        
                                        <!-- Classroom Actions -->
                                        <button type="button" class="token-btn" data-token="ğŸª‘â¬‡ï¸">ğŸª‘â¬‡ï¸ Sit Down</button>
                                        <button type="button" class="token-btn" data-token="ğŸ§â¬†ï¸">ğŸ§â¬†ï¸ Stand Up</button>
                                        <button type="button" class="token-btn" data-token="ğŸ¤«">ğŸ¤« Quiet</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘‚">ğŸ‘‚ Listen</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘€">ğŸ‘€ Look</button>
                                        <button type="button" class="token-btn" data-token="ğŸ“–">ğŸ“– Read</button>
                                        <button type="button" class="token-btn" data-token="âœï¸">âœï¸ Write</button>
                                        
                                        <!-- Questions & Help -->
                                        <button type="button" class="token-btn" data-token="ğŸ™‹">ğŸ™‹ Raise Hand</button>
                                        <button type="button" class="token-btn" data-token="â“">â“ Question</button>
                                        <button type="button" class="token-btn" data-token="â“â“">â“â“ Questions</button>
                                        <button type="button" class="token-btn" data-token="ğŸ†˜">ğŸ†˜ Help</button>
                                        <button type="button" class="token-btn" data-token="ğŸ’¡">ğŸ’¡ Understand</button>
                                        <button type="button" class="token-btn" data-token="ğŸ”„">ğŸ”„ Repeat/Again</button>
                                        
                                        <!-- School Items -->
                                        <button type="button" class="token-btn" data-token="ğŸ“š">ğŸ“š Books</button>
                                        <button type="button" class="token-btn" data-token="âœï¸">âœï¸ Pencil</button>
                                        <button type="button" class="token-btn" data-token="ğŸ“„">ğŸ“„ Paper</button>
                                        
                                        <!-- Time & Activities -->
                                        <button type="button" class="token-btn" data-token="â°">â° Time</button>
                                        <button type="button" class="token-btn" data-token="â˜•">â˜• Break</button>
                                        <button type="button" class="token-btn" data-token="ğŸ½ï¸â°">ğŸ½ï¸â° Lunch Time</button>
                                        <button type="button" class="token-btn" data-token="ğŸ“…â¡ï¸">ğŸ“…â¡ï¸ Tomorrow</button>
                                        <button type="button" class="token-btn" data-token="â–¶ï¸">â–¶ï¸ Begin/Start</button>
                                        <button type="button" class="token-btn" data-token="â¹ï¸">â¹ï¸ Stop</button>
                                        <button type="button" class="token-btn" data-token="âœ…">âœ… Done/Finish</button>
                                        
                                        <!-- Feedback & Emotions -->
                                        <button type="button" class="token-btn" data-token="ğŸ‘â­">ğŸ‘â­ Great Job</button>
                                        <button type="button" class="token-btn" data-token="â­â­â­">â­â­â­ Excellent</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘">ğŸ‘ Well Done</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜Š">ğŸ˜Š Happy</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜¢">ğŸ˜¢ Sad</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜”">ğŸ˜” Sorry</button>
                                        
                                        <!-- Classroom Management -->
                                        <button type="button" class="token-btn" data-token="ğŸ‘€âš ï¸">ğŸ‘€âš ï¸ Pay Attention</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘¥">ğŸ‘¥ Class/Partner</button>
                                        <button type="button" class="token-btn" data-token="â¡ï¸â¡ï¸â¡ï¸">â¡ï¸â¡ï¸â¡ï¸ Line Up</button>
                                        <button type="button" class="token-btn" data-token="ğŸ§¹">ğŸ§¹ Clean Up</button>
                                        <button type="button" class="token-btn" data-token="ğŸ“ğŸ ">ğŸ“ğŸ  Homework</button>
                                        <button type="button" class="token-btn" data-token="ğŸ”„ğŸ“š">ğŸ”„ğŸ“š Review</button>
                                        
                                        <!-- Basic Needs -->
                                        <button type="button" class="token-btn" data-token="ğŸš½">ğŸš½ Bathroom</button>
                                        <button type="button" class="token-btn" data-token="ğŸ">ğŸ Hungry</button>
                                        <button type="button" class="token-btn" data-token="ğŸ’§">ğŸ’§ Thirsty</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜´">ğŸ˜´ Tired</button>
                                        <button type="button" class="token-btn" data-token="ğŸ¤’">ğŸ¤’ Sick</button>
                                        
                                        <!-- Activities -->
                                        <button type="button" class="token-btn" data-token="ğŸ“š">ğŸ“š Study</button>
                                        <button type="button" class="token-btn" data-token="ğŸ¨">ğŸ¨ Art</button>
                                        <button type="button" class="token-btn" data-token="âš½">âš½ Play</button>
                                        <button type="button" class="token-btn" data-token="ğŸ ">ğŸ  Home</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family</button>
                                        <button type="button" class="token-btn" data-token="â¤ï¸">â¤ï¸ Love</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‰">ğŸ‰ Celebrate</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜¡">ğŸ˜¡ Angry</button>
                                        <button type="button" class="token-btn" data-token="ğŸ˜°">ğŸ˜° Worried</button>
                                        <button type="button" class="token-btn" data-token="ğŸ¤”">ğŸ¤” Thinking</button>
                                        
                                        <!-- Pronouns & Actions -->
                                        <button type="button" class="token-btn" data-token="ğŸ‘‰">ğŸ‘‰ You</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘ˆ">ğŸ‘ˆ Me</button>
                                        <button type="button" class="token-btn" data-token="ğŸ¤²">ğŸ¤² Have/Need</button>
                                        <button type="button" class="token-btn" data-token="ğŸ’ª">ğŸ’ª Can</button>
                                        <button type="button" class="token-btn" data-token="â¡ï¸">â¡ï¸ Go</button>
                                        <button type="button" class="token-btn" data-token="â¬…ï¸">â¬…ï¸ Come</button>
                                        <button type="button" class="token-btn" data-token="ğŸ‘ï¸">ğŸ‘ï¸ Show</button>
                                        <button type="button" class="token-btn" data-token="ğŸ’¬">ğŸ’¬ Tell/Answer</button>
                                    </div>
                                    <textarea id="student-input" placeholder="Type or use gestures above..."></textarea>
                                </div>
                                
                                <div id="speech-input-mode" style="display: none;">
                                    <div class="microphone-info">
                                        <p>ğŸ¤ <strong>Microphone Access Required</strong></p>
                                        <p>When you click "Start Recording", your browser will ask for microphone permission. Please click "Allow".</p>
                                    </div>
                                    <div class="speech-controls">
                                        <button type="button" id="start-recording" class="btn-record">
                                            ğŸ¤ Start Recording
                                        </button>
                                        <button type="button" id="stop-recording" class="btn-record-stop" style="display: none;">
                                            â¹ï¸ Stop Recording
                                        </button>
                                        <div id="recording-status" class="recording-status"></div>
                                    </div>
                                    <div id="speech-transcript" class="speech-transcript"></div>
                                </div>
                                
                                <!-- Webcam Gesture Recognition Section -->
                                <div class="webcam-section" id="webcamSection" style="display: none; margin-top: 20px;">
                                    <h3>ğŸ“¹ Gesture Recognition</h3>
                                    <div class="webcam-container">
                                        <video id="webcam" autoplay playsinline></video>
                                        <canvas id="canvas" style="display: none;"></canvas>
                                        <div class="gesture-overlay" id="gestureOverlay">
                                            <div class="detected-gesture" id="detectedGesture">No gestures detected</div>
                                        </div>
                                    </div>
                                    <div class="webcam-controls">
                                        <button type="button" onclick="startWebcam()" id="startWebcamBtn" class="btn-primary">Start Camera</button>
                                        <button type="button" onclick="stopWebcam()" id="stopWebcamBtn" class="btn-danger" style="display: none;">Stop Camera</button>
                                        <button type="button" onclick="captureGesture()" id="captureBtn" class="btn-secondary" style="display: none;">Capture Gesture</button>
                                    </div>
                                    <div class="gesture-info">
                                        <p>Supported gestures: ğŸ‘‹ Wave, ğŸ‘ Thumbs Up, âœŒï¸ Peace, ğŸ™‹ Raised Hand, âœ‹ Stop</p>
                                    </div>
                                </div>
                                
                                <button type="button" id="send-message" class="btn-secondary">Send Message</button>
                            </div>
                            
                            <div class="monitoring-section">
                                <div class="workflow-section">
                                    <h3>Agent Workflow</h3>
                                    <div id="workflow-display" class="workflow-list"></div>
                                </div>
                                
                                <div class="logs-section">
                                    <h3>Agent Decision Logs</h3>
                                    <div class="log-controls">
                                        <button type="button" id="refresh-logs" class="btn-small">Refresh</button>
                                        <button type="button" id="clear-logs" class="btn-small">Clear</button>
                                    </div>
                                    <div id="logs-display" class="logs-list"></div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
            
            <!-- Right Column: Conversation History -->
            <div class="right-sidebar">
                <section class="panel conversation-panel">
                    <h2>ğŸ“Š Conversation History</h2>
                    <div id="conversation-display" class="conversation-list"></div>
                </section>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
